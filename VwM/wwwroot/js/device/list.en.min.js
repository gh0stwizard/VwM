var Lcz={Common:{Name:"Name",Description:"Description"},Button:{Create:"New",Edit:"Edit",Delete:"Delete"}};Lcz.DataTable={AjaxRetry:"Database is Offline. Retry ..."};$(function(){"use strict";var r=$("#language").data().value,i="table#devices",t=!1,n;$.fn.dataTable.ext.errMode=function(n,i,r){switch(i){case 7:var u=new $.fn.dataTable.Api(n);setTimeout(function(){$(".dataTables_processing").text(Lcz.DataTable.AjaxRetry).show();t=!0;u.ajax.reload()},500);break;default:alert(r)}};n=$(i).DataTable({rowId:"id",language:{url:"/json/datatables/"+r+".json"},stateSave:!1,pagingType:"full_numbers",processing:!0,serverSide:!0,select:{info:!1},ajax:{url:"/api/device",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:function(n){return JSON.stringify(n)}},order:[[1,"asc"]],columns:[{data:"id",visible:!1,searchable:!1},{data:"name"},{data:"description"},{data:"hostnames"}],buttons:[{text:Lcz.Button.Create,action:function(){window.location="/Device/New"}},{text:Lcz.Button.Edit,action:function(n,t){var i=t.row({selected:!0}).data();window.location="/Device/Edit/"+i.id},enabled:!1},{text:Lcz.Button.Delete,action:function(n,t){t.buttons([1,2]).enable(!1);var i=t.rows({selected:!0}).data(),r=$.map(i,function(n){return n.id});$.ajax({url:"/api/device/"+r.join(","),type:"DELETE",success:function(){t.row(id).remove().draw()}})},enabled:!1}],dom:"<'row'<'col-sm-12 col-md-6'B><'col-sm-12 col-md-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-12 col-md-5 align-self-sm-end'l><'col-sm-12 col-md-7'p>><'row float-right'<'col-sm col-md'i>>"});n.on("draw.dt",function(n,i){t&&($(".dataTables_processing").text(i.oLanguage.processing),t=!1)}).on("select deselect",function(){var t=n.rows({selected:!0}).count();n.buttons([1]).enable(t==1);n.buttons([2]).enable(t>=1)});$(document).click(function(n){var t=$(i);t.find(n.target).length==0&&t.DataTable().rows().deselect()})});